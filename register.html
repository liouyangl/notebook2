<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Document</title>
<link rel="stylesheet" type="text/css" href="css/register.css">
</head>
<body>
	<div class="bigDiv">
		<div class="picture"></div>
		<div class="regist">
			<div class="regist2">
				<img src="img3/1.png">
				<b>注册</b>
			</div>
			<div class="regist3">
				<p>请填写下列各栏，以为梅赛德斯-奔驰电子商务平台进行注册。</p>
			</div>
			<div class="regist4">
				<div class="regist5">
					<p>带星号（*）标记的是必填栏</p>
				</div>
				<div class="regist6">
					<b>姓名 *</b><br/>
					<input id="name" type="text">
					<span id="spanId"></span> 
				</div>
				<div class="regist6 regist7">
					<b id="password">密码*</b><br/>
					<input id="pass" type="password"><span class="spa"></span>
				</div>
				<div class="regist6 regist7">
					<b>国家或地区 *</b><br/>
					<select>
						<option>中国</option>
						<option>香港</option>
						<option>澳门</option>
					</select>
				</div>
				<div class="regist8">
					<b>手机号码 *</b><br/>
					<div class="regist9">
						<div class="regist10">
							<select id="sel">
								<option>中国+86</option>
								<option>中国台湾+886</option>
								<option>中国香港+852</option>								
							</select>
						</div>
						<div class="regist11"><input id="num" type="text" ><span></span></div>
					</div>
				</div>
				<div class="regist8">
					<b>重复手机号码 *</b><br/>
					<div class="regist9">
						<div class="regist10 regist12"><b>+86</b></div>
						<div class="regist11 regist13">
							<input id="repeat2" type="text">
						</div>
					</div>
				</div>
				<div class="regist6 regist7">
					<b>输入验证码 *</b><br/>
					<input type="text">
				</div>
				<div class="regist14">
					<img src="img3/2.png">
					<b id="repeat">重新加载验证码</b><br/>
					<input id="result" type="text" value="443k">
				</div>
				<div class="regist15">
					<input type="checkbox" name="">
					<b>我已阅读并同意 </b><a href="#"><span>访问条件</span></a>。 *
				</div>   
				<div class="regist16">
					<div class="regist17">
						<a id="btn" href="#">注册</a>
					</div>
				</div>
			</div>
			<div class="regist18">
				<a href="#">访问条件 | </a>
				<a href="#">Cookie | </a>
				<a href="#">数据保护</a>
			</div>
		</div>
	</div>
</body>
</html>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
function ajaxs(name,num,password){
	$.post("register.php", { "name": name,"num":num,"password":password },
 		  function(data){
    	 	if(data==1){
    	 		alert("注册成功");
    	 		location.href="login.html";
    	 	}else if(data==2){
    	 	 	alert("该用户名已存在");
			}else{
				alert("注册失败");
			}

     }, "json"); 
}	

	$("#btn").click(function(){
		ajaxs($("#name").val(),$("#num").val(),$("#pass").val());
	});
// 	$("#name").blur(function(){
// 		ajaxs($("#name").val());
// 	});

// 	function ajaxs(name){
// 	$.post("register2.php", { "name": name},
//  	   function(data){
//     	if(data==3){
//     		$("#spanId").html("该用户名已经被使用");
//     	}else{
//     		$("#spanId").html("该用户名可以使用");
//     	}
//    	}, "json");
// }	


	$("#pass").blur(function(){
		var reg = /^[a-z0-9_-]{6,18}$/;   
		if(reg.test(this.value)){
			this.nextElementSibling.innerHTML = "√";
		}else{
			this.nextElementSibling.innerHTML = "密码必须小写或数字开头长度为6-18位";
		}
	});

	
	$("#num").blur(function(){
		var reg = /^1[3-9]\d{9}$/i;
		if(reg.test(this.value)){
			this.nextElementSibling.innerHTML = "√";
		}else{
			this.nextElementSibling.innerHTML = "手机号码必须为11位";
		}
	});

	$("#repeat").click(function(){
		var arr="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
		var str = "";
		for(var i=0;i<4;i++){
			var num = parseInt(Math.random()*arr.length);
			str+=arr[num];
		}
		$("#result").val(str);

	});
</script>